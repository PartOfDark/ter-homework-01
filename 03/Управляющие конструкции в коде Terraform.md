# Домашнее задание к занятию "Основы Terraform. Yandex cloud"

### Цель задания

1. Создать свои первые ресурсы в облаке Yandex cloud с помощью terraform.
2. Освоить работу с переменными terraform

------

### Чеклист готовности к домашнему заданию

1. Зарегистрирован аккаунт в Yandex Cloud. Использован промокод на грант.
2. установлен инструмент yandex cli
3. Исходный код для выполнения задания расположен в директории **03/src**.
4. Любые ВМ, использованные при выполнении задания должны быть прерываемыми, для экономии средств.

------

### Инструменты/ дополнительные материалы, которые пригодятся для выполнения задания

1. https://console.cloud.yandex.ru/folders/<cloud_id>/vpc/security-groups
2. https://cloud.yandex.ru/docs/vpc/concepts/security-groups?from=int-console-help-center-or-nav
3. https://terraform-eap.website.yandexcloud.net/docs/providers/yandex/d/datasource_compute_disk.html


### Задание 1

1. Изучите проект. Заполните файл personal.auto.tfvars
2. Инициализируйте проект, выполните код.

Примечание: Если у вас не активирован preview доступ к функционалу "Группы безопасности" в Yandex Cloud - запросите доступ у поддержки облачного провайдера. Обычно его выдают в течении 24-х часов. 

Приложите скриншот входящих правил "Группы безопасности" в ЛК yandex cloud  или скриншот отказа в предоставлении доступа к preview версии.

------

### Задание 2
1. Создайте файл count-vm.tf. Опишите в нем создание двух **одинаковых** виртуальных машины, используя мета-аргумент **count loop**.
2. Создайте файл for_each-vm.tf. Опишите в нем создание 2 **разных** по cpu/ram/disk виртуальных машин, используя мета-аргумент **for_each loop**. Используйте переменную типа list(object({ vm_name=string, cpu=number, ram=number, disk=number  })). 
При желании внесите в переменную все возможные параметры.
3. ВМ из пункта 2.2 должны создаваться после создания ВМ из пункта 2.1
4. Инициализируйте проект, выполните код.

### Задание 2
1. Создайте 4 одинаковых виртуальных диска, размером 1 Гб с помощью ресурса yandex_compute_disk и мета-аргумента count.
2. Создайте одну **любую** ВМ. Используйте блок **dynamic secondary_disk{..}** и мета-аргумент for_each для подключения созданных вами дополнительных дисков.
3. Подключите к ВМ созданную в 1-м задании группу безопасности.


### Задание 3
1. Используя функцию tepmplatefile, напишите файл-шаблон для создания ansible inventory-файла, аналогичного лекции.
Передайте в него имена и внешние ip-адреса ВМ из пункта 2.1.


### Задание 4*(необязательное)
1. Напишите output, который отобразит в виде списка словарей  все созданные вами ВМ:
``` 
[
 {
  "name" = 'имя ВМ'
  "id"   = 'идентификатор ВМ'
  "fqdn" = 'Внутренний FQDN'
 },
]
```
Приложите скриншот вывода команды ```terrafrom output```

------
### Правила приема работы

1. Отправлена ссылка на репозиторий (github) с выполненным заданием

------